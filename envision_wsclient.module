<?php

/**
 * @file
 * Web service client examples module.
 */

/**
 * Implements hook_commerce_checkout_page_info().
 */
function envision_wsclient_commerce_checkout_page_info() {
  $checkout_pages = array();

  $checkout_pages['checkout_to_webservice'] = array(
    'name' => t('checkout to webservice'),
    'title' => t('Connect to remote server'),
    'weight' => 4,
    'buttons' => TRUE,
  );

  return $checkout_pages;
}

/**
 * Implements hook_commerce_checkout_pane_info().
 */
function envision_wsclient_commerce_checkout_pane_info() {
  $checkout_panes = array();

  $checkout_panes['envision_wsclient'] = array(
    'title' => t('Envision WSClient'),
    'base' => 'envision_wsclient_pane',
    'file' => 'includes/envision_wsclient.checkout_pane.inc',
    'page' => 'checkout_to_webservice',
    'weight' => 3,
    'review' => FALSE,
  );

  return $checkout_panes;
}


/**
 * Implements hook_menu(). 
 * for testing
 */
function envision_wsclient_menu() {
  $items['test/restful'] = array(
    'page callback' => 'exec_wsclient',
    'file' => 'envision_wsclient.test.inc',
    'page arguments' => array(1),
    'access callback' => TRUE,
    'type' => MENU_CALLBACK,
  );

  return $items;
}


/**
 * Implements hook_default_wsclient_service().
 */
function envision_wsclient_default_wsclient_service() {

  $service = new WSClientServiceDescription();
  $service->name = 'envision_webservice';
  $service->label = 'Envision Webservice';
  $service->url = 'http://218.4.19.204:8081/envision/restful/';
  $service->type = 'rest';

  // Add info about the REST service, which the user has to provide via the UI.
  $service->datatypes = array(
    'return_result' => array(
      'label' => 'Return Result',
      'property info' => array(
        'responseData' => array(
          'type' => 'text',
          'label' => 'Return Result'
        ),
      ),
    ),
  );
  
  $operation['label'] = 'Create';
  $operation['url'] = 'createvApp';
  $operation['parameter']['serviceName'] = array('type' => 'text', 'label' => 'ServiceName');
  $operation['parameter']['hireDays'] = array('type' => 'text', 'label' => 'hireDays');
  $operation['parameter']['vmSize'] = array('type' => 'text', 'label' => 'vmSize');
  $operation['parameter']['maxWindQuantity'] = array('type' => 'text', 'label' => 'maxWindQuantity');
  $operation['parameter']['maxVisitors'] = array('type' => 'text', 'label' => 'maxVisitors');
  $operation['parameter']['templateName'] = array('type' => 'text', 'label' => 'templateName');
  $operation['type']='POST';
  $service->operations['create'] = $operation;
  
  //delete operation
  $operation = array();
  $operation['label'] = 'Delete';
  $operation['url'] = 'deletevApp';
  $operation['parameter']['serviceName'] = array('type' => 'text', 'label' => 'ServiceName');
  $operation['type']='POST';
  $service->operations['delete'] = $operation;
  
  $services[$service->name] = $service;
  
  return $services;
}
